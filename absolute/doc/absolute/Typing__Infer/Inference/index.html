<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Inference (absolute.Typing__Infer.Inference)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">absolute</a> &#x00BB; <a href="../index.html">Typing__Infer</a> &#x00BB; Inference</nav><h1>Module <code>Typing__Infer.Inference</code></h1><p>Module containing all the necessary information to type a formula with a given abstract domain type.</p></header><div class="spec module" id="module-Var2UID"><a href="#module-Var2UID" class="anchor"></a><code><span class="keyword">module</span> Var2UID : Stdlib.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-Var2UID">Var2UID</a>.key = <a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a></code></div><dl><dt class="spec type" id="type-var_env"><a href="#type-var_env" class="anchor"></a><code><span class="keyword">type</span> var_env</code><code> = <span><span><a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> list</span> <a href="index.html#module-Var2UID">Var2UID</a>.t</span></code></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <a href="../../Typing/Ad_type/index.html#type-ad_ty">Typing.Ad_type.ad_ty</a> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Boolean is the `trace` which indicates if the inference should create the error message or not (it might take longer if yes).</p></dd></dl><dl><dt class="spec value" id="val-gen_err"><a href="#val-gen_err" class="anchor"></a><code><span class="keyword">val</span> gen_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> string)</span> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dd><p>Create `CannotType` with the given message if the trace is activated, and an empty message otherwise.</p></dd></dl><dl><dt class="spec value" id="val-create_typing_error"><a href="#val-create_typing_error" class="anchor"></a><code><span class="keyword">val</span> create_typing_error : string <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Format the typing error of a formula. We try to give the most precise error (an error on a small sub-formula).</p></dd></dl><dl><dt class="spec value" id="val-variable_not_in_dom_err"><a href="#val-variable_not_in_dom_err" class="anchor"></a><code><span class="keyword">val</span> variable_not_in_dom_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-variable_not_in_subdom_err"><a href="#val-variable_not_in_subdom_err" class="anchor"></a><code><span class="keyword">val</span> variable_not_in_subdom_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-not_a_box_constraint_err"><a href="#val-not_a_box_constraint_err" class="anchor"></a><code><span class="keyword">val</span> not_a_box_constraint_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-not_an_octagonal_constraint_err"><a href="#val-not_an_octagonal_constraint_err" class="anchor"></a><code><span class="keyword">val</span> not_an_octagonal_constraint_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-ground_dom_does_not_handle_logic_connector_err"><a href="#val-ground_dom_does_not_handle_logic_connector_err" class="anchor"></a><code><span class="keyword">val</span> ground_dom_does_not_handle_logic_connector_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-no_domain_support_this_variable_err"><a href="#val-no_domain_support_this_variable_err" class="anchor"></a><code><span class="keyword">val</span> no_domain_support_this_variable_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> <span>&#45;&gt;</span> <a href="../../Core/Types/index.html#type-var_ty">Core.Types.var_ty</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-sat_does_not_support_term_err"><a href="#val-sat_does_not_support_term_err" class="anchor"></a><code><span class="keyword">val</span> sat_does_not_support_term_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-direct_product_no_subdomain_err"><a href="#val-direct_product_no_subdomain_err" class="anchor"></a><code><span class="keyword">val</span> direct_product_no_subdomain_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-logic_completion_subdomain_failed_on_term_err"><a href="#val-logic_completion_subdomain_failed_on_term_err" class="anchor"></a><code><span class="keyword">val</span> logic_completion_subdomain_failed_on_term_err : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-interval_can_represent_var"><a href="#val-interval_can_represent_var" class="anchor"></a><code><span class="keyword">val</span> interval_can_represent_var : <a href="../../Typing/Ad_type/index.html#type-vardom_ty">Typing.Ad_type.vardom_ty</a> <span>&#45;&gt;</span> <a href="../../Core/Types/index.html#type-var_ty">Core.Types.var_ty</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-compatible_ty"><a href="#val-compatible_ty" class="anchor"></a><code><span class="keyword">val</span> compatible_ty : <a href="../../Core/Types/index.html#type-var_ty">Core.Types.var_ty</a> <span>&#45;&gt;</span> <a href="../../Core/Types/index.html#type-value_ty">Core.Types.value_ty</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-infer_var"><a href="#val-infer_var" class="anchor"></a><code><span class="keyword">val</span> infer_var : <a href="../../Core/Types/index.html#type-var_ty">Core.Types.var_ty</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_ty">Typing.Ad_type.ad_ty</a> <span>&#45;&gt;</span> <span><a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> list</span></code></dt><dt class="spec value" id="val-infer_vars_ty"><a href="#val-infer_vars_ty" class="anchor"></a><code><span class="keyword">val</span> infer_vars_ty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-iqformula">iqformula</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <a href="../index.html#type-iqformula">iqformula</a></code></dt><dd><p>For each variable, infer its UIDs.</p></dd></dl><dl><dt class="spec value" id="val-belong"><a href="#val-belong" class="anchor"></a><code><span class="keyword">val</span> belong : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-bool_var_infer"><a href="#val-bool_var_infer" class="anchor"></a><code><span class="keyword">val</span> bool_var_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a></code></dt><dt class="spec value" id="val-ground_dom_infer"><a href="#val-ground_dom_infer" class="anchor"></a><code><span class="keyword">val</span> ground_dom_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <span>(<a href="../../Lang/Ast/index.html#type-bconstraint">Lang.Ast.bconstraint</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a>)</span> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>Infer type for ground abstract domain, <code>term_infer</code> gives a type to term. It is a helper to implement inference for box, octagon and other ground abstract domains. It walks through conjunction `TAnd`, `TFVar` and call <code>term_infer</code> on `TCmp`.</p></dd></dl><dl><dt class="spec value" id="val-fully_defined_over"><a href="#val-fully_defined_over" class="anchor"></a><code><span class="keyword">val</span> fully_defined_over : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../../Lang/Ast/index.html#type-bconstraint">Lang.Ast.bconstraint</a> <span>&#45;&gt;</span> <span><a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> option</span></code></dt><dd><p>`None` if the variables of `c` are all treatable in the element `uid`, otherwise `Some v` where `v` is a variable not treatable.</p></dd></dl><dl><dt class="spec value" id="val-box_infer"><a href="#val-box_infer" class="anchor"></a><code><span class="keyword">val</span> box_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-vardom_ty">Typing.Ad_type.vardom_ty</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>Infer the type of all the box constraints.</p></dd></dl><dl><dt class="spec value" id="val-octagon_infer"><a href="#val-octagon_infer" class="anchor"></a><code><span class="keyword">val</span> octagon_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>Infer the type of all the octagonal constraints.</p></dd></dl><dl><dt class="spec value" id="val-generic_formula_infer"><a href="#val-generic_formula_infer" class="anchor"></a><code><span class="keyword">val</span> generic_formula_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <span>(<a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a>)</span> <span>&#45;&gt;</span> <span>(<a href="../../Lang/Ast/index.html#type-bconstraint">Lang.Ast.bconstraint</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../index.html#type-inferred_type">inferred_type</a>)</span> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>A generic inference scheme for logical formula (useful for SAT and Logic completion). <code>literal</code> and <code>term</code> are functions called on <code>TFVar</code> and <code>TCmp</code> respectively.</p></dd></dl><dl><dt class="spec value" id="val-sat_infer"><a href="#val-sat_infer" class="anchor"></a><code><span class="keyword">val</span> sat_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>Infer the type of all SAT subformulas.</p></dd></dl><dl><dt class="spec value" id="val-direct_product_infer"><a href="#val-direct_product_infer" class="anchor"></a><code><span class="keyword">val</span> direct_product_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <span><a href="../../Typing/Ad_type/index.html#type-ad_ty">Typing.Ad_type.ad_ty</a> list</span> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>Infer the type of all subformulas compatible with this direct product.</p></dd></dl><dl><dt class="spec value" id="val-logic_completion_infer"><a href="#val-logic_completion_infer" class="anchor"></a><code><span class="keyword">val</span> logic_completion_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_ty">Typing.Ad_type.ad_ty</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>Infer the type of all subformulas compatible with the logic completion of the given domain's type.</p></dd></dl><dl><dt class="spec value" id="val-propagator_completion_infer"><a href="#val-propagator_completion_infer" class="anchor"></a><code><span class="keyword">val</span> propagator_completion_infer : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_ty">Typing.Ad_type.ad_ty</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>Infer the type of all constraints compatible with the propagator completion of the given domain's type.</p></dd></dl><dl><dt class="spec value" id="val-infer_constraints_ty"><a href="#val-infer_constraints_ty" class="anchor"></a><code><span class="keyword">val</span> infer_constraints_ty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <a href="../../Typing/Ad_type/index.html#type-ad_ty">Typing.Ad_type.ad_ty</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a></code></dt><dd><p>General inference of a formula with regards to the available abstract domain type.</p></dd></dl><dl><dt class="spec value" id="val-infer_constraints_ty_or_fail"><a href="#val-infer_constraints_ty_or_fail" class="anchor"></a><code><span class="keyword">val</span> infer_constraints_ty_or_fail : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-iqformula">iqformula</a> <span>&#45;&gt;</span> <a href="../index.html#type-iqformula">iqformula</a></code></dt><dd><p>Type a formula or raise `Wrong_modelling` if it cannot type it.</p></dd></dl><div class="spec module" id="module-VarConsCounter"><a href="#module-VarConsCounter" class="anchor"></a><code><span class="keyword">module</span> VarConsCounter : Stdlib.Map.S <span class="keyword">with</span> <span class="keyword">type</span> <a href="index.html#module-VarConsCounter">VarConsCounter</a>.key = <a href="../../Lang/Ast/index.html#type-vname">Lang.Ast.vname</a> * <a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a></code></div><dl><dt class="spec value" id="val-build_var_cons_map"><a href="#val-build_var_cons_map" class="anchor"></a><code><span class="keyword">val</span> build_var_cons_map : <span><span class="type-var">'a</span> <a href="../../Typing/Aast/index.html#type-aformula">Typing.Aast.aformula</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span>int list</span>)</span> <span>&#45;&gt;</span> <span><span>(int * int)</span> <a href="index.html#module-VarConsCounter">VarConsCounter</a>.t</span></code></dt><dd><p>Create a structure storing the number of unary and nary constraints for each variable and domain uid.</p></dd></dl><dl><dt class="spec value" id="val-restrict_unary_var_dom"><a href="#val-restrict_unary_var_dom" class="anchor"></a><code><span class="keyword">val</span> restrict_unary_var_dom : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> list</span> <span>&#45;&gt;</span> <span><a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> list</span></code></dt><dd><p>This part is quite specialized, we need more research to infer better general rules. Basically, we do not want to add an unary variable in an octagon if a box (or SAT) is available, because it is less costly.</p></dd></dl><dl><dt class="spec value" id="val-restrict_variable_ty"><a href="#val-restrict_variable_ty" class="anchor"></a><code><span class="keyword">val</span> restrict_variable_ty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-iqformula">iqformula</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <a href="../index.html#type-iqformula">iqformula</a></code></dt><dd><p>Instantiate a variable with a single type.</p></dd></dl><dl><dt class="spec value" id="val-instantiate_formula_ty"><a href="#val-instantiate_formula_ty" class="anchor"></a><code><span class="keyword">val</span> instantiate_formula_ty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-iformula">iformula</a> <span>&#45;&gt;</span> <span><a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <a href="../../Typing/Aast/index.html#type-aformula">Typing.Aast.aformula</a></span></code></dt><dt class="spec value" id="val-instantiate_qformula_ty"><a href="#val-instantiate_qformula_ty" class="anchor"></a><code><span class="keyword">val</span> instantiate_qformula_ty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-iqformula">iqformula</a> <span>&#45;&gt;</span> <span><a href="../../Typing/Ad_type/index.html#type-ad_uid">Typing.Ad_type.ad_uid</a> <a href="../../Typing/Aast/index.html#type-aqformula">Typing.Aast.aqformula</a></span></code></dt><dd><p>Instantiate a formula with a single type per sub-formula.</p></dd></dl><dl><dt class="spec value" id="val-check_type_var"><a href="#val-check_type_var" class="anchor"></a><code><span class="keyword">val</span> check_type_var : <a href="../index.html#type-iqformula">iqformula</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Raises `Wrong_modelling` if a variable in `TExists` has a type `CannotType`.</p></dd></dl></div></body></html>